<div class="c-contet-wp c-formation-stack-dw">


    <div class="c-formation-dw-hw">
        <!-- <h2>{{originName}} Details</h2> -->
        <ul>
            <li>{{formationStack.formationSetName}}</li>
            <li>{{formationStack.baseFormationName}}</li>
            <li>{{formationStack.oppBaseFormationName}}</li>
        </ul>
        <!-- <div class="btn btn-secondary mr-1" (click)="share()" ngbTooltip="Share to facebook" *ngIf="id">
                    <i class="fa fa-facebook"></i>
                  Share on Facebook
                </div> -->
        <div class="c-view-w">
            <div class="c-view-in" ngbTooltip="Visitors" *ngIf="formationStack?.visitors">
                <i class="fa fa-eye" aria-hidden="true"></i>
                <span>{{formationStack.visitors}}</span>
            </div>
            <div class="btn btn-primary" (click)="cancel()" ngbTooltip="Back">
                <i class="icon-angle-double-left"></i>
            </div>
            <div class="btn btn-primary mr-0 ml-1" (click)="social_handels_url_share()" ngbTooltip="Share Page Url"
                *ngIf="id">
                <i class="fa fa-share"></i>
            </div>
        </div>
    </div>


    <!-- custom carousel section with canvas -->
    <div class="form-row mt-3 mb-3">
        <div class="col-md-8 col-12"
            *ngIf="id && (formationStack.formationSetImages && formationStack.formationSetImages.length > 0)">
            <div class="carouselbox">
                <!-- <ngb-carousel>
                    <ng-template ngbSlide *ngFor="let image of formationStack.formationSetImages">
                        <img [src]="image.fileUrl" class="img-fluid" alt="{{formationStack.formationSetName}}"
                            title="{{formationStack.formationSetName}}">
                    </ng-template>
                </ngb-carousel> -->
            </div>
        </div>
        <div
            [ngClass]="[id && (formationStack.formationSetImages && formationStack.formationSetImages.length > 0) ? 'col-md-4 col-12' : 'col-md-12  c-formation-dw-no-loop']">
            <div
                [ngClass]="[id && (formationStack.formationSetImages && formationStack.formationSetImages.length > 0) ? 'canvasbox' : 'row']">
                <div
                    [ngClass]="[id && (formationStack.formationSetImages && formationStack.formationSetImages.length > 0) ? 'col-md-12 p-0' : 'col-md-6 mb-3']">
                    <canvas #canvas></canvas>
                </div>
                <div
                    [ngClass]="[id && (formationStack.formationSetImages && formationStack.formationSetImages.length > 0) ? 'col-md-12 p-0' : 'col-md-6 mb-3']">
                    <canvas #canvas2></canvas>
                </div>
            </div>
            <div style="display: block;position: fixed;right: 100%;">
                <canvas #canvas3 class="babylon-container"></canvas>
                <canvas #canvas4 class="babylon-container"></canvas>
            </div>
        </div>
    </div>


    <div class="c-public-offense-dw-slider"
        *ngIf="(formationStack.formationSetImages?.length ?? 0) > 0 || (formationStack.formationSetVideos?.length  ?? 0) > 0">
        <!-- <owl-carousel-o [options]="owlcarousel1Options"
            *ngIf="(formationStack?.formationSetImages?.length + formationStack?.formationSetVideos?.length) > 2">
            <ng-template carouselSlide class="item" *ngFor="let img of formationStack?.formationSetImages">
                <div class="c-newSldBox">
                    <img [src]="[img.fileUrl]" alt="{{formationStack.formationSetName}}"
                        title="{{formationStack.formationSetName}}">
                    <div class="overlayhover" style="position: absolute;">
                        <button class="btn btn-outline-primary btn-eye-outline mr-2">
                            <i class="icofont icofont-eye-alt" (click)="openViewModal(img)"></i>
                        </button>
                    </div>
                </div>
            </ng-template>
            <ng-template carouselSlide class="item" *ngFor="let vdo of formationStack?.formationSetVideos">
                <div class="c-newSldBox">
                    <img [src]="[vdo.thumbnailUrl]" alt="{{formationStack.formationSetName}}"
                        title="{{formationStack.formationSetName}}" *ngIf="vdo.thumbnailUrl">
                    <video autoplay [muted]="true" width="100%" class="dash-video"
                        *ngIf="!vdo.thumbnailUrl && vdo.fileUrl" (ended)="handleVideoEnded($event)">
                        <source src="{{vdo.fileUrl}}" type="video/mp4">
                    </video>
                    <div class="overlayhover" style="position: absolute;" *ngIf="vdo.thumbnailUrl">
                        <button class="btn btn-outline-primary btn-eye-outline mr-2">
                            <i class="icofont icofont-play-alt-2" (click)="openViewModal(vdo)" ngbTooltip="Play"></i>
                        </button>
                    </div>
                </div>
            </ng-template>
        </owl-carousel-o> -->
        <div class="c-public-offense-dw-slider-none"
            *ngIf="(formationStack?.formationSetImages?.length ?? 0) + (formationStack?.formationSetVideos?.length ?? 0 ) < 3">
            <div class="row">
                <div class="col-md-4" *ngFor="let img of formationStack?.formationSetImages">
                    <div class="c-newSldBox">
                        <img [src]="[img.fileUrl]" alt="{{formationStack.formationSetName}}"
                            title="{{formationStack.formationSetName}}">
                        <div class="overlayhover" style="position: absolute;">
                            <button class="btn btn-outline-primary btn-eye-outline mr-2">
                                <i class="icofont icofont-eye-alt" (click)="openViewModal(img)"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-md-4" *ngFor="let vdo of formationStack?.formationSetVideos">
                    <div class="c-newSldBox">
                        <img [src]="[vdo.thumbnailUrl]" alt="{{vdo.thumbnailSeq}}" *ngIf="vdo.thumbnailUrl"
                            title="{{vdo.thumbnailSeq}}">
                        <video autoplay [muted]="true" width="100%" class="dash-video"
                            *ngIf="!vdo.thumbnailUrl && vdo?.isVideo" (ended)="handleVideoEnded($event)">
                            <source src="{{vdo.fileUrl}}" type="video/mp4">
                        </video>
                        <div class="overlayhover" style="position: absolute;" *ngIf="vdo.thumbnailUrl">
                            <button class="btn btn-outline-primary btn-eye-outline mr-2">
                                <i class="icofont icofont-play-alt-2" (click)="openViewModal(vdo)"
                                    ngbTooltip="Play"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Related -->
    <div class="c-public-offense-dw-slider"
        *ngIf="(relatedVideos && relatedVideos.length > 0) || (relatedImages && relatedImages.length > 0)">

        <div class="c-secTitleBx">
            <h3>Related Media</h3>
        </div>
        <!-- <owl-carousel-o [options]="owlcarousel1Options" *ngIf="(relatedVideos?.length + relatedImages?.length) > 2">
            <ng-template carouselSlide class="item" *ngFor="let vdo of relatedVideos">
                <div class="c-newSldBox">
                    <img [src]="[vdo.thumbnailUrl]" alt="{{vdo?.name}}" *ngIf="vdo.thumbnailUrl" title="{{vdo?.name}}">
                    <video autoplay [muted]="true" width="100%" class="dash-video"
                        *ngIf="!vdo.thumbnailUrl && vdo.fileUrl" (ended)="handleVideoEnded($event)">
                        <source src="{{vdo.fileUrl}}" type="video/mp4">
                    </video>
                    <div class="overlayhover" style="position: absolute;" *ngIf="vdo.thumbnailUrl">
                        <button class="btn btn-outline-primary btn-eye-outline mr-2">
                            <i class="icofont icofont-play-alt-2" (click)="openViewModal(vdo)" ngbTooltip="Play"></i>
                        </button>
                    </div>
                </div>
                <div class="vdboxttl">
                    <a class="link" title="{{vdo?.name}}" href="{{vdo?.routeUrlPublicView}}">{{vdo?.name}}</a>
                    <div class="d-flex justify-content-between align-items-center detlsusr c-dark-routeUrlPublicView">
                        <p>{{vdo?.origin}}</p>
                        <p>STRONGSIDE ({{vdo?.activityOn}})</p>
                    </div>
                </div>
            </ng-template>
            <ng-template carouselSlide class="item" *ngFor="let img of relatedImages">
                <div class="c-newSldBox">
                    <img [src]="[img.fileUrl]" alt="{{img?.name}}" title="{{img?.name}}">
                    <div class="overlayhover" style="position: absolute;">
                        <button class="btn btn-outline-primary btn-eye-outline mr-2">
                            <i class="icofont icofont-eye-alt" (click)="openViewModal(img)"></i>
                        </button>
                    </div>
                </div>
                <div class="vdboxttl">
                    <a class="link" title="{{img?.name}}" href="{{img?.routeUrlPublicView}}">{{img?.name}}</a>
                    <div class="d-flex justify-content-between align-items-center detlsusr c-dark-routeUrlPublicView">
                        <p>{{img?.origin}}</p>
                        <p>STRONGSIDE ({{img?.activityOn}})</p>
                    </div>
                </div>
            </ng-template>
            <ng-template carouselSlide class="item">
                <div class="c-newSldBox c-related-show-main" *ngIf="defaultRelatedVideos?.length > 0">
                    <div class="related-show-more-w">
                        <button type="button" class="btn btn-secondary" (click)="loadMore()" *ngIf="!loadMoreIconshow">
                            Load More
                        </button>
                        <div class="loader loader-4" *ngIf="loadMoreIconshow">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                </div>
            </ng-template>
        </owl-carousel-o> -->
        <div class="c-public-offense-dw-slider-none"
            *ngIf="(relatedVideos?.length ?? 0) + (relatedImages?.length ?? 0) < 3">
            <div class="row">
                <div class="col-md-4" *ngFor="let vdo of relatedVideos">
                    <div class="c-newSldBox">
                        <img [src]="[vdo.thumbnailUrl]" alt="{{vdo.thumbnailSeq}}" title="{{vdo.thumbnailSeq}}"
                            *ngIf="vdo.thumbnailUrl">
                        <video autoplay [muted]="true" width="100%" class="dash-video"
                            *ngIf="!vdo.thumbnailUrl && vdo.isVideo" (ended)="handleVideoEnded($event)">
                            <source src="{{vdo.fileUrl}}" type="video/mp4">
                        </video>
                        <div class="overlayhover" style="position: absolute;" *ngIf="vdo.thumbnailUrl">
                            <button class="btn btn-outline-primary btn-eye-outline mr-2">
                                <i class="icofont icofont-play-alt-2" (click)="openViewModal(vdo)"
                                    ngbTooltip="Play"></i>
                            </button>
                        </div>
                    </div>
                    <div class="vdboxttl">
                        <a class="link" title="{{vdo?.name}}" href="{{vdo?.routeUrlPublicView}}">{{vdo?.name}}</a>
                        <div
                            class="d-flex justify-content-between align-items-center detlsusr c-dark-routeUrlPublicView">
                            <p>{{vdo?.origin}}</p>
                            <p>STRONGSIDE ({{vdo?.activityOn}})</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4" *ngFor="let img of relatedImages">
                    <div class="c-newSldBox">
                        <img [src]="[img.fileUrl]" alt="{{img?.name}}" title="{{img?.name}}">
                        <div class="overlayhover" style="position: absolute;">
                            <button class="btn btn-outline-primary btn-eye-outline mr-2">
                                <i class="icofont icofont-eye-alt" (click)="openViewModal(img)"></i>
                            </button>
                        </div>
                    </div>
                    <div class="vdboxttl">
                        <a class="link" title="{{img?.name}}" href="{{img?.routeUrlPublicView}}">{{img?.name}}</a>
                        <div
                            class="d-flex justify-content-between align-items-center detlsusr c-dark-routeUrlPublicView">
                            <p>{{img?.origin}}</p>
                            <p>STRONGSIDE ({{img?.activityOn}})</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="c-newSldBox c-related-show-main"
                        *ngIf="((defaultRelatedVideos?.length ?? 0) > 0) || ((defaultRelatedImages?.length ?? 0 ) > 0)">
                        <div class="related-show-more-w">
                            <button type="button" class="btn btn-secondary" (click)="loadMore()"
                                *ngIf="!loadMoreIconshow">
                                Load More
                            </button>
                            <div class="loader loader-4" *ngIf="loadMoreIconshow">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                        </div>
                        <!-- <div class="overlayhover" style="position: absolute;">
                            <div class="d-flex justify-content-center align-items-center">
                                <button class="btn btn-outline-primary btn-eye-outline mr-2" (click)="loadMore()"
                                    *ngIf="!loadMoreIconshow"> <i class="icofont icofont-plus"></i>
                                </button>
                            </div>
                        </div> -->
                    </div>
                </div>
            </div>
        </div>

    </div>
    <!-- END -->

    <!-- View modal -->
    <ng-template #videoViewcontent let-c="close" let-d="dismiss" let-modal>
        <div class="modal-body">
            <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')"
                ngbTooltip="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            <div class="boxvideo">
                <img src="{{modalData?.fileUrl}}" alt="{{modalData.formationSetName}}"
                    title="{{modal.formationSetName}}" class="img-fluid" *ngIf="!modalData?.isVideo">
                <!-- <img src="{{modalData?.thumbnailUrl}}" alt="" class="img-fluid" *ngIf="modalData?.thumbnailUrl && modalData?.isVideo"> -->
                <video controls controlsList="nodownload" width="100%"
                    *ngIf="modalData?.thumbnailUrl && modalData?.isVideo" (ended)="handleVideoEnded($event)">
                    <source src="{{modalData?.fileUrl}}" type="video/mp4">
                </video>
            </div>
        </div>
    </ng-template>
    <!-- END -->
</div>
<!-- Add Share Modal -->
<ng-template #shareModal let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Share</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="form-row">
            <div class="col-md-12">
                <!-- <label for="clipboard1">Share Link</label> -->
                <input class="form-control" id="clipboard1" [ngModel]="shareUrl" type="text" placeholder="Share Link"
                    readonly #userinput>
            </div>
            <div class="col-md-12">
                <div class="d-flex justify-content-center align-items-center">
                    <div class="icnbox facebook" data-href="https://developers.facebook.com/docs/plugins/"
                        data-layout="button_count" data-size="small">
                        <a target="_blank"
                            href="https://www.facebook.com/sharer/sharer.php?u={{shareUrl}}&amp;src=sdkpreparse"
                            class="fb-xfbml-parse-ignore" ngbTooltip="Facebook" placement="bottom">
                            <i class="fa fa-facebook"></i>
                        </a>
                    </div>
                    <div class="icnbox whatsapp">
                        <a target="_blank" [href]="whatsAppshareUrl" ngbTooltip="Whatsapp" placement="bottom">
                            <i data-action="share/whatsapp/share" class="fa fa-whatsapp"></i>
                        </a>
                    </div>
                    <div class="icnbox insta" ngbTooltip="Instagram" placement="bottom">
                        <a target="_blank" [href]="instagramShareUrl">
                            <i class="fa fa-instagram"></i>
                        </a>
                    </div>
                    <div class="icnbox twitter">
                        <a target="_blank" [href]="twitterShareUrl" ngbTooltip="Twitter" placement="bottom">
                            <i class="fa-brands fa-x-twitter"></i>
                        </a>
                    </div>
                    <div class="icnbox copy">
                        <a href="javascript:void(0)" (click)="copyInputMessage(userinput)" ngbTooltip="Copy Link"
                            placement="bottom">
                            <i class="fa fa-clipboard" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-template>
<!-- END -->